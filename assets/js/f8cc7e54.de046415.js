"use strict";(self.webpackChunkfs_docs=self.webpackChunkfs_docs||[]).push([[6252],{9908:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"technology/architecture","title":"Architecture Layers","description":"Layered view of protocol domains \u2013 governance, legal, financial & on-chain execution.","source":"@site/docs/technology/architecture.md","sourceDirName":"technology","slug":"/technology/architecture","permalink":"/docs/technology/architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/fair-squares/fs-docs/edit/main/docs/technology/architecture.md","tags":[],"version":"current","lastUpdatedBy":"\u201cilhanu\u201d","lastUpdatedAt":1759311655000,"sidebarPosition":2,"frontMatter":{"title":"Architecture Layers","sidebar_position":2,"description":"Layered view of protocol domains \u2013 governance, legal, financial & on-chain execution."},"sidebar":"tutorialSidebar","previous":{"title":"Introduction","permalink":"/docs/technology/intro"},"next":{"title":"Detailed Design (Pooled Asset Model)","permalink":"/docs/technology/design"}}');var r=i(4848),s=i(8453);const a={title:"Architecture Layers",sidebar_position:2,description:"Layered view of protocol domains \u2013 governance, legal, financial & on-chain execution."},l="Fair Squares Protocol Architecture (Layered View)",o={},c=[{value:"1. Layer Overview",id:"1-layer-overview",level:2},{value:"Reading The Diagram",id:"reading-the-diagram",level:3},{value:"2. Legal &amp; Compliance Touchpoints",id:"2-legal--compliance-touchpoints",level:2},{value:"3. Financial Flow (Simplified)",id:"3-financial-flow-simplified",level:2},{value:"4. Data Entities Snapshot",id:"4-data-entities-snapshot",level:2},{value:"5. Replacement of Static Images",id:"5-replacement-of-static-images",level:2},{value:"6. Extensibility Notes",id:"6-extensibility-notes",level:2},{value:"7. Quick Diff vs <code>design.md</code>",id:"7-quick-diff-vs-designmd",level:2}];function d(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"fair-squares-protocol-architecture-layered-view",children:"Fair Squares Protocol Architecture (Layered View)"})}),"\n",(0,r.jsxs)(n.p,{children:["This page complements the in\u2011depth pallet walkthrough in ",(0,r.jsx)(n.code,{children:"design.md"})," with higher\u2011level architectural layers (legal, financial, governance, on\u2011chain execution) and data flow focus."]}),"\n",(0,r.jsx)(n.h2,{id:"1-layer-overview",children:"1. Layer Overview"}),"\n",(0,r.jsx)(n.mermaid,{value:"flowchart TB\n  subgraph L0[User & Stakeholder Layer]\n    A[Investors]\n    B[Tenants]\n    C[Sellers]\n    D[Notaries]\n    E[Representatives]\n    F[Servicer / Admin]\n  end\n\n  subgraph L1[Governance & Access Layer]\n    R[Roles Pallet<br/>KYC / Role Registry]\n    GOV[OpenGov Integration<br/>Tracks + Referenda]\n  end\n\n  subgraph L2[Asset Lifecycle Layer]\n    ONB[Onboarding Pallet<br/>Proposal Intake]\n    VAL[Valuation / Appraisal<br/>Off-chain Reports]\n    FIN[Finalizer Pallet<br/>Off-chain Legal Checks]\n    POOL[Asset Pool Engine<br/>Pool Units Mint/Burn]\n  end\n\n  subgraph L3[Capital & Operations Layer]\n    FUND[Housing Fund Pallet<br/>Capital Reserve]\n    CORP[Housing Corporation<br/>External Management]\n    AM[Asset Ops / Monitoring<br/>Reporting & Oversight]\n  end\n\n  subgraph L4[External / Off-chain]\n    LEG[Legal Agreements<br/>Jurisdictional Docs]\n    BANK[Stablecoin / Fiat Ramps]\n    ORAC[Market / Valuation Inputs]\n  end\n\n  A & B & C & D & E & F --\x3e R\n  R --\x3e GOV\n  R --\x3e ONB\n  C --\x3e ONB --\x3e VAL --\x3e FIN --\x3e POOL\n  GOV --\x3e POOL\n  A --\x3e FUND --\x3e POOL\n  POOL --\x3e AM\n  CORP --\x3e AM\n  CORP --\x3e LEG\n  FIN --\x3e LEG\n  FUND --\x3e BANK\n  ORAC --\x3e VAL"}),"\n",(0,r.jsx)(n.h3,{id:"reading-the-diagram",children:"Reading The Diagram"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Blue/Green boxes = on\u2011chain pallets."}),"\n",(0,r.jsx)(n.li,{children:"Grey boxes = external dependencies or off\u2011chain validation domains."}),"\n",(0,r.jsx)(n.li,{children:"Horizontal progression = lifecycle from idea \u2192 verified asset \u2192 pooled backing \u2192 external tenancy management."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"2-legal--compliance-touchpoints",children:"2. Legal & Compliance Touchpoints"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Phase"}),(0,r.jsx)(n.th,{children:"Primary Pallet(s)"}),(0,r.jsx)(n.th,{children:"Legal Concern"}),(0,r.jsx)(n.th,{children:"Mitigation Pattern"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Proposal Intake"}),(0,r.jsx)(n.td,{children:"Onboarding"}),(0,r.jsx)(n.td,{children:"Authentic seller representation"}),(0,r.jsx)(n.td,{children:"Role verification + proposal fee staking"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Valuation"}),(0,r.jsx)(n.td,{children:"Valuation / Appraisal"}),(0,r.jsx)(n.td,{children:"Fair market assessment"}),(0,r.jsx)(n.td,{children:"Multi\u2011source appraisal + track record"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Legal Finalization"}),(0,r.jsx)(n.td,{children:"Finalizer"}),(0,r.jsx)(n.td,{children:"Title, encumbrances, jurisdiction"}),(0,r.jsx)(n.td,{children:"Off\u2011chain notarization checkpoint"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Pool Expansion"}),(0,r.jsx)(n.td,{children:"Asset Pool Engine"}),(0,r.jsx)(n.td,{children:"Asset-to-pool correctness"}),(0,r.jsx)(n.td,{children:"Mint policy (only additive unless disposal) + audit trail"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Operational Management"}),(0,r.jsx)(n.td,{children:"Housing Corporation"}),(0,r.jsx)(n.td,{children:"Tenant protection, compliance"}),(0,r.jsx)(n.td,{children:"Regulated third\u2011party management agreements"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"3-financial-flow-simplified",children:"3. Financial Flow (Simplified)"}),"\n",(0,r.jsx)(n.mermaid,{value:"sequenceDiagram\n  autonumber\n  participant Inv as Investor\n  participant FUND as Housing Fund\n  participant ONB as Onboarding\n  participant VAL as Valuation\n  participant FIN as Finalizer\n  participant POOL as Asset Pool\n  participant CORP as Housing Corp\n\n  Inv->>FUND: Bond Capital (Stable asset)\n  ONB->>ONB: Collect Proposal + Seller Docs\n  ONB->>VAL: Request Appraisals\n  VAL--\x3e>FIN: Valuation Reports\n  FIN->>FIN: Legal & Title Checks\n  FIN--\x3e>POOL: Approve Asset Inclusion\n  POOL->>POOL: Mint Pool Units (proportional)\n  FUND->>POOL: Allocate Capital for Acquisition\n  CORP->>POOL: Operational Metrics (Occupancy/Rent)\n  CORP->>FUND: Net Cashflow Settlement\n  POOL->>Inv: Accrue NAV Growth (implicit)"}),"\n",(0,r.jsx)(n.h2,{id:"4-data-entities-snapshot",children:"4. Data Entities Snapshot"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Entity"}),(0,r.jsx)(n.th,{children:"Source"}),(0,r.jsx)(n.th,{children:"Key Fields (Illustrative)"}),(0,r.jsx)(n.th,{children:"Downstream Usage"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"RoleAccount"}),(0,r.jsx)(n.td,{children:"Roles"}),(0,r.jsx)(n.td,{children:"account_id, role, activated"}),(0,r.jsx)(n.td,{children:"Gating actions (Onboarding, Governance)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Proposal"}),(0,r.jsx)(n.td,{children:"Onboarding"}),(0,r.jsx)(n.td,{children:"proposal_id, asset_metadata_hash, seller_id, status"}),(0,r.jsx)(n.td,{children:"Valuation, Finalizer"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Appraisal"}),(0,r.jsx)(n.td,{children:"Valuation"}),(0,r.jsx)(n.td,{children:"appraisal_id, proposal_id, value_amount, method, timestamp"}),(0,r.jsx)(n.td,{children:"Finalizer cross\u2011checks"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"PoolUnit"}),(0,r.jsx)(n.td,{children:"Asset Pool"}),(0,r.jsx)(n.td,{children:"pool_id, total_units, nav_per_unit"}),(0,r.jsx)(n.td,{children:"Investor dashboards, accounting"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"FundContribution"}),(0,r.jsx)(n.td,{children:"Housing Fund"}),(0,r.jsx)(n.td,{children:"account_id, amount, bonded_since"}),(0,r.jsx)(n.td,{children:"Pool capacity planning"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"GovernanceTrack"}),(0,r.jsx)(n.td,{children:"OpenGov"}),(0,r.jsx)(n.td,{children:"track_id, purpose, decision_params"}),(0,r.jsx)(n.td,{children:"Referendum routing, risk gating"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"CorpAgreement"}),(0,r.jsx)(n.td,{children:"Off\u2011chain"}),(0,r.jsx)(n.td,{children:"corp_id, sla_hash, jurisdictions"}),(0,r.jsx)(n.td,{children:"Compliance oversight"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"5-replacement-of-static-images",children:"5. Replacement of Static Images"}),"\n",(0,r.jsxs)(n.p,{children:["Legacy static images (e.g., ",(0,r.jsx)(n.code,{children:"bidding_flow.jpg"}),", ",(0,r.jsx)(n.code,{children:"workflow_p1.png"}),", ",(0,r.jsx)(n.code,{children:"workflow_p2.png"}),") can be progressively refactored into mermaid diagrams using the patterns above. When converting:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Identify the semantic stages \u2192 prefer ",(0,r.jsx)(n.code,{children:"flowchart LR"})," or ",(0,r.jsx)(n.code,{children:"sequenceDiagram"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"Keep labels concise \u2013 long narrative belongs in surrounding markdown."}),"\n",(0,r.jsx)(n.li,{children:"Use subgraphs to cluster responsibilities (e.g., Council / Investors / System)."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"6-extensibility-notes",children:"6. Extensibility Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Additional compliance layers (KYC attestations, property registry oracles) can slot into Layer L4 without changing core pallet contracts."}),"\n",(0,r.jsx)(n.li,{children:"Tokenomics or fee redistribution modules would logically extend Layer L3."}),"\n",(0,r.jsx)(n.li,{children:"Monitoring / analytics exporters would be adjunct to all layers via event indexing."}),"\n"]}),"\n",(0,r.jsxs)(n.h2,{id:"7-quick-diff-vs-designmd",children:["7. Quick Diff vs ",(0,r.jsx)(n.code,{children:"design.md"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"design.md"})," narrates the chronological scenario with exhaustive role tables. This page instead:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Normalizes cross\u2011cutting concerns (legal, financial, governance) into vertical layers."}),"\n",(0,r.jsx)(n.li,{children:"Adds a financial sequence view for treasury transparency."}),"\n",(0,r.jsx)(n.li,{children:"Introduces an entity portability map for future API / indexer design."}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Last updated: 2025-09-29 (asset pool + OpenGov + external corp ops refactor)"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);